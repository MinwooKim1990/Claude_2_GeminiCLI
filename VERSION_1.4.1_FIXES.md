# Version 1.4.1 Bug Fixes

## 문제점 분석

다른 Claude의 테스트 결과, v1.4.0에서 다음과 같은 심각한 문제들이 발견되었습니다:

1. **메시지 전송 실패**
   - tmux send-keys 명령이 제대로 실행되지 않음
   - 메시지가 Gemini 입력창에 표시되지 않음
   - Enter 키가 전송되지 않아 명령이 실행되지 않음

2. **응답 캡처 실패**
   - 너무 복잡한 패턴 매칭으로 인한 오작동
   - 불완전한 응답만 반환됨
   - 타임아웃이 자주 발생

3. **세션 상태 불일치**
   - debug 정보에서 세션이 없다고 표시되는데 실제로는 존재함

## 해결책

### 1. tmux send-keys 개선
```bash
# 이전 (문제 있음)
tmux send-keys -t gemini-ai '${escapedMessage}'

# 수정 (안정적)
tmux send-keys -t gemini-ai -l "${message.replace(/"/g, '\\"')}"
```
- `-l` 플래그 사용으로 특수 문자 처리 개선
- 작은따옴표 대신 큰따옴표 사용
- 더 간단한 이스케이프 처리

### 2. 응답 캡처 단순화
- 복잡한 regex 패턴 매칭 제거
- 단순한 문자열 검색으로 변경
- 안정성 카운터를 3으로 줄임

### 3. 디버그 정보 개선
- 실제 실행된 tmux 명령 표시
- 명령 실행 결과 (stdout/stderr) 캡처
- raw output의 마지막 500자 표시

### 4. 대기 시간 증가
- 메시지 전송 후 3초 대기 (이전 2초)
- tmux 키 처리 후 100ms 대기 추가

## 결과

v1.4.1은 v1.4.0의 과도한 복잡성을 제거하고 핵심 기능의 안정성에 집중했습니다. 
이제 메시지가 제대로 전송되고 응답을 안정적으로 받을 수 있습니다.